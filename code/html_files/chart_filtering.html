<!DOCTYPE html>
<html lang="en">

<head>
    <title>Chart Filtering</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://s3.amazonaws.com/mturk-public/externalHIT_v1.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
          integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous" />
    <style>
        input[type="range"].unmoved::-webkit-slider-thumb {
            border: 1px solid #dddddd;
            background: #dddddd;
        }

        input[type="range"].unmoved::-moz-range-thumb {
            border: 1px solid #dddddd;
            background-color: #dddddd;
        }
    </style>
</head>

<body>
<div class="container p-5">
    <div class="row justify-content-center">
        <button type="button" class="btn btn-primary col-sm-12 d-none" data-toggle="collapse"
                data-target="#instructions-panel" id="instructions-toggle">
            <span id="instructions-toggle-text">Show Instructions</span>
        </button>
    </div>
    <div id="instructions-btns" class="row">
        <button type="button" class="btn btn-primary mr-auto col-sm-2 mb-3 d-none" id="intro-previous">
            Previous
        </button>
        <button type="button" class="btn btn-primary ml-auto col-sm-2 mb-3" id="intro-next">
            Next
        </button>
        <button type="button" class="btn btn-success ml-auto col-sm-2 mb-3 d-none" id="ready-button">
            Proceed
        </button>
    </div>
    <div id="instructions-panel" class="row">
        <div class="col-sm-12 mx-auto border rounded shadow-sm text-center" style="background-color: #f5f5f5;">
            <h4 class="text-left mt-3"><strong>Task instructions</strong></h4>
            <div class="text-left">
                <div id="instructions-0" class="instructions active">
                    <p id="instructions-project-text"></p>
                </div>
                <div id="instructions-1" class="instructions d-none">
                    <div class="col-sm-12 mx-auto border rounded shadow-sm" style="background-color: #f5f5f5;">
                        <h4 class="text-left mt-3">
                            Examples
                        </h4>
                        <br> In this task you will see a chart. After looking at it carefully, decide if the chart should be filtered because it has any of the following issues: <br> (1) not in <b>English</b>, (2) not <b>readable</b> (e.g. blurred text, cropped image, etc.), OR (3) not <b>understandable</b> what the chart is about. <br><br> Otherwise select "The chart has no issue from above". <br><br> We added some automated checks and will manually check some submissions before accepting.
                        <hr>
                        <div>
                            <h5 class="text-left text-primary mt-3">
                                1. Example: CHART NOT IN ENGLISH
                            </h5>
                            <div class="row d-flex justify-content-center">
                                <div class="col-sm-11 pr-0 pl-0">
                                    <h6>1. Look at the following chart and (if available) its caption:
                                    </h6>
                                </div>
                            </div>
                            <br />
                            <div id="example-table-1" class=''>
                                <div class="row d-flex justify-content-center">
                                    <img src="https://chartfc.s3.amazonaws.com/%25D0%25A0%25D0%25BE%25D0%25B7%25D1%2581%25D0%25B5%25D0%25BB%25D0%25B5%25D0%25BD%25D0%25BD%25D1%258F_%25D1%2582%25D1%2583%25D1%2580%25D0%25BA%25D1%2596%25D0%25B2_(%25D0%25A3%25D0%25BA%25D1%2580%25D0%25B0%25D1%2597%25D0%25BD%25D0%25B0).PNG" alt="..." class="img-thumbnail"/>
                                    <br />
                                </div>
                                <div class="row">
                                    <div class="col"></div>
                                    <div class="col-8">
                                        <p><b>Caption: </b>Turks in Ukraine</p>
                                    </div>
                                </div>
                                <br />
                                <!---->
                                <div id="label-panel" class=''>
                                    <div class="row d-flex justify-content-center">
                                        <div class="col-sm-11 pr-0 pl-0">
                                            <h6>2. Afterwards decide, if the chart has any of the issues below: </h6>
                                        </div>
                                    </div>
                                    <div class="row d-flex justify-content-center">
                                        <div class="col-sm-11 pr-0 pl-0">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="not-english" checked disabled>
                                                <label class="form-check-label" for="not-english">
                                                    The chart is not in English.
                                                </label>
                                            </div>
                                            <br>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="not-readable" disabled>
                                                <label class="form-check-label" for="not-readable">
                                                    The chart is not readable.
                                                </label>
                                            </div>
                                            <br>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="not-understandable" disabled>
                                                <label class="form-check-label" for="not-understandable">
                                                    The chart is not understandable because (select one of the reasons below):
                                                </label>
                                            </div>
                                            <br>
                                            <div class="col-sm-7">
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1" disabled>
                                                    <label class="form-check-label" for="inlineCheckbox1">Missing information (like title, numbers, or names)</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2" disabled>
                                                    <label class="form-check-label" for="inlineCheckbox2">Confusing use of colors</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox3" value="option3" disabled>
                                                    <label class="form-check-label" for="inlineCheckbox3">Other reasons: </label>
                                                    <br>
                                                    <div class="form-group">
                                                        <textarea class="form-control" id="textArea1" rows="1" placeholder="Enter reason here..." style="min-width: 100%"></textarea>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br>
                            <div class="row d-flex justify-content-center">
                                <div class="col-sm-11 pr-0 pl-0">
                                    <h6>3. Otherwise, select:
                                    </h6>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" id="chart-no-issue" disabled>
                                        <label class="form-check-label" for="chart-no-issue">
                                            The chart has no issue from above (i.e. it is in English, readable, and understandable).
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p class="p-3 mb-2 bg-light text-primary"><b>EXPLANATION:</b> The <b>title and labels</b> of the chart show it's <b>not in English</b>. The chart needs to be filtered; we <b>select</b> option <b>"The chart is not in English"</b> .</p>
                        <hr>
                        <div>
                            <h5 class="text-left text-primary mt-3">
                                2. Example: CHART NOT READABLE
                            </h5>
                            <div class="row d-flex justify-content-center">
                                <div class="col-sm-11 pr-0 pl-0">
                                    <h6>1. Look at the following chart and (if available) its caption:
                                    </h6>
                                </div>
                            </div>
                            <br />
                            <div id="example-chart-2" class=''>
                                <div class="row d-flex justify-content-center">
                                    <img src="https://chartfc.s3.amazonaws.com/2011_budget_tax_chart.png" alt="..." class="img-thumbnail">
                                    <br />
                                </div>
                                <div class="row">
                                    <div class="col"></div>
                                    <div class="col-10">
                                        <p><b>Caption: </b>2011 Budget taxation chart outlining revenue accumulated by various taxation areas.</p>
                                    </div>
                                </div>
                                <br />
                                <!---->
                                <div id="label-panel-chart-2" class=''>
                                    <div class="row d-flex justify-content-center">
                                        <div class="col-sm-11 pr-0 pl-0">
                                            <h6>2. Afterwards decide, if the chart has any of the issues below: </h6>
                                        </div>
                                    </div>
                                    <div class="row d-flex justify-content-center">
                                        <div class="col-sm-11 pr-0 pl-0">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="not-english" disabled>
                                                <label class="form-check-label" for="not-english">
                                                    The chart is not in English.
                                                </label>
                                            </div>
                                            <br>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="not-readable" checked disabled>
                                                <label class="form-check-label" for="not-readable">
                                                    The chart is not readable.
                                                </label>
                                            </div>
                                            <br>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="not-understandable" disabled>
                                                <label class="form-check-label" for="not-understandable">
                                                    The chart is not understandable because (select one of the reasons below):
                                                </label>
                                            </div>
                                            <br>
                                            <div class="col-sm-7">
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1" disabled>
                                                    <label class="form-check-label" for="inlineCheckbox1">Missing information (like title, numbers, or names)</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2" disabled>
                                                    <label class="form-check-label" for="inlineCheckbox2">Confusing use of colors</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox3" value="option3" disabled>
                                                    <label class="form-check-label" for="inlineCheckbox3">Other reasons: </label>
                                                    <br>
                                                    <div class="form-group">
                                                        <textarea class="form-control" id="textArea1" rows="1" placeholder="Enter reason here..." style="min-width: 100%"></textarea>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br>
                            <div class="row d-flex justify-content-center">
                                <div class="col-sm-11 pr-0 pl-0">
                                    <h6>3. Otherwise, select:
                                    </h6>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" id="chart-no-issue" disabled>
                                        <label class="form-check-label" for="chart-no-issue">
                                            The chart has no issue from above (i.e. it is in English, readable, and understandable).
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p class="p-3 mb-2 bg-light text-primary"><b>EXPLANATION:</b> The chart is <b>not readable</b> because 1. it's bottom part is <b>cropped</b> and 2. the <b>text</b> is too <b>small</b> to be read. The chart needs to be filtered; we <b>select</b> option <b>"The chart is not readable"</b> .</p>
                        <hr>
                        <div>
                            <h5 class="text-left text-primary mt-3">
                                3. Example: CHART NOT UNDERSTANDABLE (missing information)
                            </h5>
                            <div class="row d-flex justify-content-center">
                                <div class="col-sm-11 pr-0 pl-0">
                                    <h6>1. Look at the following chart and (if available) its caption:
                                    </h6>
                                </div>
                            </div>
                            <br />
                            <div id="example-chart-2" class=''>
                                <div class="row d-flex justify-content-center">
                                    <img src="https://chartfc.s3.amazonaws.com/Egm6341.s11.team3.HW5.4_3.png" alt="..." class="img-thumbnail">
                                    <br />
                                </div>
                                <div class="row">
                                    <div class="col"></div>
                                    <div class="col-8">
                                        <p><b>Caption: </b>Turks in Ukraine</p>
                                    </div>
                                </div>
                                <br />
                                <!---->
                                <div id="label-panel-chart-3" class=''>
                                    <div class="row d-flex justify-content-center">
                                        <div class="col-sm-11 pr-0 pl-0">
                                            <h6>2. Afterwards decide, if the chart has any of the issues below: </h6>
                                        </div>
                                    </div>
                                    <div class="row d-flex justify-content-center">
                                        <div class="col-sm-11 pr-0 pl-0">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="not-english" disabled>
                                                <label class="form-check-label" for="not-english">
                                                    The chart is not in English.
                                                </label>
                                            </div>
                                            <br>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="not-readable" disabled>
                                                <label class="form-check-label" for="not-readable">
                                                    The chart is not readable.
                                                </label>
                                            </div>
                                            <br>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="not-understandable" checked disabled>
                                                <label class="form-check-label" for="not-understandable">
                                                    The chart is not understandable because (select one of the reasons below):
                                                </label>
                                            </div>
                                            <br>
                                            <div class="col-sm-7">
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1" checked disabled>
                                                    <label class="form-check-label" for="inlineCheckbox1">Missing information (like title, numbers, or names)</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2" disabled>
                                                    <label class="form-check-label" for="inlineCheckbox2">Confusing use of colors</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox3" value="option3" disabled>
                                                    <label class="form-check-label" for="inlineCheckbox3">Other reasons: </label>
                                                    <br>
                                                    <div class="form-group">
                                                        <textarea class="form-control" id="textArea1" rows="1" placeholder="Enter reason here..." style="min-width: 100%"></textarea>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br>
                            <div class="row d-flex justify-content-center">
                                <div class="col-sm-11 pr-0 pl-0">
                                    <h6>3. Otherwise, select:
                                    </h6>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" id="chart-no-issue" disabled>
                                        <label class="form-check-label" for="chart-no-issue">
                                            The chart has no issue from above (i.e. it is in English, readable, and understandable).
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p class="p-3 mb-2 bg-light text-primary"><b>EXPLANATION:</b> The chart is <b>not understandable</b> because the legend is missing, thus we do not know what the blue and black dots mean. The chart needs to be filtered; we <b>select</b> options <b>"The chart is not understandable"</b> and <b>"Missing information (like title, numbers, or names)"</b>.</p>
                        <hr>
                        <div>
                            <h5 class="text-left text-primary mt-3">
                                4. Example: CHART NOT UNDERSTANDABLE (data)
                            </h5>
                            <div class="row d-flex justify-content-center">
                                <div class="col-sm-11 pr-0 pl-0">
                                    <h6>1. Look at the following chart and (if available) its caption:
                                    </h6>
                                </div>
                            </div>
                            <br />
                            <div id="example-chart-2" class=''>
                                <div class="row d-flex justify-content-center">
                                    <img src="https://chartfc.s3.amazonaws.com/1P_HEK293.png" alt="..." class="img-thumbnail">
                                    <br />
                                </div>
                                <div class="row">
                                    <div class="col"></div>
                                    <div class="col-8">
                                        <p><b>Caption: </b>Turks in Ukraine</p>
                                    </div>
                                </div>
                                <br />
                                <!---->
                                <div id="label-panel-chart-3" class=''>
                                    <div class="row d-flex justify-content-center">
                                        <div class="col-sm-11 pr-0 pl-0">
                                            <h6>2. Afterwards decide, if the chart has any of the issues below: </h6>
                                        </div>
                                    </div>
                                    <div class="row d-flex justify-content-center">
                                        <div class="col-sm-11 pr-0 pl-0">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="not-english" disabled>
                                                <label class="form-check-label" for="not-english">
                                                    The chart is not in English.
                                                </label>
                                            </div>
                                            <br>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="not-readable" disabled>
                                                <label class="form-check-label" for="not-readable">
                                                    The chart is not readable.
                                                </label>
                                            </div>
                                            <br>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="not-understandable" checked disabled>
                                                <label class="form-check-label" for="not-understandable">
                                                    The chart is not understandable because (select one of the reasons below):
                                                </label>
                                            </div>
                                            <br>
                                            <div class="col-sm-7">
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1" disabled>
                                                    <label class="form-check-label" for="inlineCheckbox1">Missing information (like title, numbers, or names)</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2" disabled>
                                                    <label class="form-check-label" for="inlineCheckbox2">Confusing use of colors</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox3" value="option3" checked disabled>
                                                    <label class="form-check-label" for="inlineCheckbox3">Other reasons: </label>
                                                    <br>
                                                    <div class="form-group">
                                                        <textarea class="form-control" id="textArea1" rows="3" placeholder="Understanding the chart requires specific knowledge"></textarea>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br>
                            <div class="row d-flex justify-content-center">
                                <div class="col-sm-11 pr-0 pl-0">
                                    <h6>3. Otherwise, select:
                                    </h6>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" id="chart-no-issue" disabled>
                                        <label class="form-check-label" for="chart-no-issue">
                                            The chart has no issue from above (i.e. it is in English, readable, and understandable).
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p class="p-3 mb-2 bg-light text-primary"><b>EXPLANATION:</b> The chart is <b>not understandable</b> because we have <b>no knowledge</b> what the title <b>ASAP1 R415Q (ASAP2s)</b> means. Even though the chart has title and labels, we can not write a sentence describing the chart. The chart needs to be filtered; we <b>select</b> options <b>"The chart is not understandable"</b> and <b>"Understanding the chart requires specific knowledge"</b>.</p>
                        <hr>
                        <div>
                            <h5 class="text-left text-primary mt-3">
                                5. Example: CHART NOT UNDERSTANDABLE (colors)
                            </h5>
                            <div class="row d-flex justify-content-center">
                                <div class="col-sm-11 pr-0 pl-0">
                                    <h6>1. Look at the following chart and (if available) its caption:
                                    </h6>
                                </div>
                            </div>
                            <br />
                            <div id="example-chart-5" class=''>
                                <div class="row d-flex justify-content-center">
                                    <img src="https://chartfc.s3.amazonaws.com/2D_3_line_scatter_plot.gif" alt="..." class="img-thumbnail">
                                    <br />
                                </div>
                                <div class="row">
                                    <div class="col"></div>
                                    <div class="col-12">
                                        <p><b>Caption: </b>A 2D scatter plot forming 3 lines, with the approximate lines shown, with circles to show distance from the axis, and data divided by color to form 3 "blobs", one for each line. Other information To be used to answer a Reference Desk question.</p>
                                    </div>
                                </div>
                                <br />
                                <!---->
                                <div id="label-panel-chart-3" class=''>
                                    <div class="row d-flex justify-content-center">
                                        <div class="col-sm-11 pr-0 pl-0">
                                            <h6>2. Afterwards decide, if the chart has any of the issues below: </h6>
                                        </div>
                                    </div>
                                    <div class="row d-flex justify-content-center">
                                        <div class="col-sm-11 pr-0 pl-0">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="not-english" disabled>
                                                <label class="form-check-label" for="not-english">
                                                    The chart is not in English.
                                                </label>
                                            </div>
                                            <br>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="not-readable" disabled>
                                                <label class="form-check-label" for="not-readable">
                                                    The chart is not readable.
                                                </label>
                                            </div>
                                            <br>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="not-understandable" disabled>
                                                <label class="form-check-label" for="not-understandable">
                                                    The chart is not understandable because (select one of the reasons below):
                                                </label>
                                            </div>
                                            <br>
                                            <div class="col-sm-7">
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1" disabled>
                                                    <label class="form-check-label" for="inlineCheckbox1">Missing information (like title, numbers, or names)</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2" checked disabled>
                                                    <label class="form-check-label" for="inlineCheckbox2">Confusing use of colors</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox3" value="option3" disabled>
                                                    <label class="form-check-label" for="inlineCheckbox3">Other reasons: </label>
                                                    <br>
                                                    <div class="form-group">
                                                        <textarea class="form-control" id="textArea1" rows="1" placeholder="Enter reason here..." style="min-width: 100%"></textarea>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br>
                            <div class="row d-flex justify-content-center">
                                <div class="col-sm-11 pr-0 pl-0">
                                    <h6>3. Otherwise, select:
                                    </h6>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" id="chart-no-issue" disabled>
                                        <label class="form-check-label" for="chart-no-issue">
                                            The chart has no issue from above (i.e. it is in English, readable, and understandable).
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p class="p-3 mb-2 bg-light text-primary"><b>EXPLANATION:</b> The chart is <b>not understandable</b> because it uses many colors without explaining what they mean. The chart needs to be filtered; we <b>select</b> options <b>"The chart is not understandable"</b> and <b>"Confusing use of colors"</b>.</p>
                        <hr>
                        <div>
                            <h5 class="text-left text-primary mt-3">
                                6. Example: CHART HAS NO ISSUES
                            </h5>
                            <div class="row d-flex justify-content-center">
                                <div class="col-sm-11 pr-0 pl-0">
                                    <h6>1. Look at the following chart and (if available) its caption:
                                    </h6>
                                </div>
                            </div>
                            <br />
                            <div id="example-chart-5" class=''>
                                <div class="row d-flex justify-content-center">
                                    <img src="https://chartfc.s3.amazonaws.com/1831_Occupational_Graph.jpg" alt="..." class="img-thumbnail">
                                    <br />
                                </div>
                                <div class="row">
                                    <div class="col"></div>
                                    <div class="col-11">
                                        <p><b>Caption: </b>Graph Showing the Occupational statistics of 1831.</p>
                                    </div>
                                </div>
                                <br />
                                <!---->
                                <div id="label-panel-chart-3" class=''>
                                    <div class="row d-flex justify-content-center">
                                        <div class="col-sm-11 pr-0 pl-0">
                                            <h6>2. Afterwards decide, if the chart has any of the issues below: </h6>
                                        </div>
                                    </div>
                                    <div class="row d-flex justify-content-center">
                                        <div class="col-sm-11 pr-0 pl-0">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="not-english" disabled>
                                                <label class="form-check-label" for="not-english">
                                                    The chart is not in English.
                                                </label>
                                            </div>
                                            <br>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="not-readable" disabled>
                                                <label class="form-check-label" for="not-readable">
                                                    The chart is not readable.
                                                </label>
                                            </div>
                                            <br>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="not-understandable" disabled>
                                                <label class="form-check-label" for="not-understandable">
                                                    The chart is not understandable because (select one of the reasons below):
                                                </label>
                                            </div>
                                            <br>
                                            <div class="col-sm-7">
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1" disabled>
                                                    <label class="form-check-label" for="inlineCheckbox1">Missing information (like title, numbers, or names)</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2" disabled>
                                                    <label class="form-check-label" for="inlineCheckbox2">Confusing use of colors</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox3" value="option3" disabled>
                                                    <label class="form-check-label" for="inlineCheckbox3">Other reasons: </label>
                                                    <br>
                                                    <div class="form-group">
                                                        <textarea class="form-control" id="textArea1" rows="1" placeholder="Enter reason here..." style="min-width: 100%"></textarea>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br>
                            <div class="row d-flex justify-content-center">
                                <div class="col-sm-11 pr-0 pl-0">
                                    <h6>3. Otherwise, select:
                                    </h6>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" id="chart-no-issue" checked disabled>
                                        <label class="form-check-label" for="chart-no-issue">
                                            The chart has no issue from above (i.e. it is in English, readable, and understandable).
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p class="p-3 mb-2 bg-light text-primary"><b>EXPLANATION:</b> The chart has <b>no issues</b> because it is in <b>English</b>, <b>readable</b>, and <b>understandable</b>, i.e. we are able to <b>write one sentence about it</b>, e.g. "The chart shows that agricultural labourers had the highest occupation in 1831," . We <b>select</b> option <b>"The chart has no issue from above (i.e. it is in English, readable, and understandable)"</b>.</p>
                        <hr>
                        <div>
                            <h5 class="text-left text-primary mt-3">
                                7. Example: CHART HAS NO ISSUES
                            </h5>
                            <div class="row d-flex justify-content-center">
                                <div class="col-sm-11 pr-0 pl-0">
                                    <h6>1. Look at the following chart and (if available) its caption:
                                    </h6>
                                </div>
                            </div>
                            <br />
                            <div id="example-chart-7" class=''>
                                <div class="row d-flex justify-content-center">
                                    <img src="https://chartfc.s3.amazonaws.com/2006_Mexican_elections_-_President.png" alt="..." class="img-thumbnail">
                                    <br />
                                </div>
                                <div class="row">
                                    <div class="col"></div>
                                    <div class="col-11">
                                        <p><b>Caption: </b>2006 Mexican Presidential election vote count progression. Percentage of poll stations counted (abscissa or x-axis) vs. percentage of candidate vote (ordinate or y-axis).</p>
                                    </div>
                                </div>
                                <br />
                                <!---->
                                <div id="label-panel-chart-7" class=''>
                                    <div class="row d-flex justify-content-center">
                                        <div class="col-sm-11 pr-0 pl-0">
                                            <h6>2. Afterwards decide, if the chart has any of the issues below: </h6>
                                        </div>
                                    </div>
                                    <div class="row d-flex justify-content-center">
                                        <div class="col-sm-11 pr-0 pl-0">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="not-english" disabled>
                                                <label class="form-check-label" for="not-english">
                                                    The chart is not in English.
                                                </label>
                                            </div>
                                            <br>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="not-readable" disabled>
                                                <label class="form-check-label" for="not-readable">
                                                    The chart is not readable.
                                                </label>
                                            </div>
                                            <br>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="not-understandable" disabled>
                                                <label class="form-check-label" for="not-understandable">
                                                    The chart is not understandable because (select one of the reasons below):
                                                </label>
                                            </div>
                                            <br>
                                            <div class="col-sm-7">
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1" disabled>
                                                    <label class="form-check-label" for="inlineCheckbox1">Missing information (like title, numbers, or names)</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2" disabled>
                                                    <label class="form-check-label" for="inlineCheckbox2">Confusing use of colors</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox3" value="option3" disabled>
                                                    <label class="form-check-label" for="inlineCheckbox3">Other reasons: </label>
                                                    <br>
                                                    <div class="form-group">
                                                        <textarea class="form-control" id="textArea1" rows="1" placeholder="Enter reason here..." style="min-width: 100%"></textarea>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br>
                            <div class="row d-flex justify-content-center">
                                <div class="col-sm-11 pr-0 pl-0">
                                    <h6>3. Otherwise, select:
                                    </h6>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" id="chart-no-issue" checked disabled>
                                        <label class="form-check-label" for="chart-no-issue">
                                            The chart has no issue from above (i.e. it is in English, readable, and understandable).
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p class="p-3 mb-2 bg-light text-primary"><b>EXPLANATION:</b> The chart has <b>no issues</b> because it is in <b>English</b>, <b>readable</b>, and <b>understandable</b>, i.e. we are able to <b>write one sentence about it</b>, e.g. "In the 2006 Mexican presidential election Calderon had more votes after all polling stations were counted than Lopez." . We <b>select</b> option <b>"The chart has no issue from above (i.e. it is in English, readable, and understandable)"</b>.</p>
                        <hr>
                        <div>
                            <h5 class="text-left text-primary mt-3">
                                8. Example: CHART HAS NO ISSUES
                            </h5>
                            <div class="row d-flex justify-content-center">
                                <div class="col-sm-11 pr-0 pl-0">
                                    <h6>1. Look at the following chart and (if available) its caption:
                                    </h6>
                                </div>
                            </div>
                            <br />
                            <div id="example-chart-8" class=''>
                                <div class="row d-flex justify-content-center">
                                    <img src="https://chartfc.s3.amazonaws.com/2004_global_autogas_consumption.png" alt="..." class="img-thumbnail">
                                    <br />
                                </div>
                                <div class="row">
                                    <div class="col"></div>
                                    <div class="col-11">
                                        <p><b>Caption: </b>2004 Global Autogas Consumption graph. Data: http://www.worldlpgas.com/gain/what-is-autogas-/global-autogas-statistics/.</p>
                                    </div>
                                </div>
                                <br />
                                <!---->
                                <div id="label-panel-chart-8" class=''>
                                    <div class="row d-flex justify-content-center">
                                        <div class="col-sm-11 pr-0 pl-0">
                                            <h6>2. Afterwards decide, if the chart has any of the issues below: </h6>
                                        </div>
                                    </div>
                                    <div class="row d-flex justify-content-center">
                                        <div class="col-sm-11 pr-0 pl-0">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="not-english" disabled>
                                                <label class="form-check-label" for="not-english">
                                                    The chart is not in English.
                                                </label>
                                            </div>
                                            <br>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="not-readable" disabled>
                                                <label class="form-check-label" for="not-readable">
                                                    The chart is not readable.
                                                </label>
                                            </div>
                                            <br>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" id="not-understandable" disabled>
                                                <label class="form-check-label" for="not-understandable">
                                                    The chart is not understandable because (select one of the reasons below):
                                                </label>
                                            </div>
                                            <br>
                                            <div class="col-sm-7">
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1" disabled>
                                                    <label class="form-check-label" for="inlineCheckbox1">Missing information (like title, numbers, or names)</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option2" disabled>
                                                    <label class="form-check-label" for="inlineCheckbox2">Confusing use of colors</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="checkbox" id="inlineCheckbox3" value="option3" disabled>
                                                    <label class="form-check-label" for="inlineCheckbox3">Other reasons: </label>
                                                    <br>
                                                    <div class="form-group">
                                                        <textarea class="form-control" id="textArea1" rows="1" placeholder="Enter reason here..." style="min-width: 100%"></textarea>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br>
                            <div class="row d-flex justify-content-center">
                                <div class="col-sm-11 pr-0 pl-0">
                                    <h6>3. Otherwise, select:
                                    </h6>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" id="chart-no-issue" checked disabled>
                                        <label class="form-check-label" for="chart-no-issue">
                                            The chart has no issue from above (i.e. it is in English, readable, and understandable).
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p class="p-3 mb-2 bg-light text-primary"><b>EXPLANATION:</b> The chart has <b>no issues</b> because it is in <b>English</b>, <b>readable</b>, and <b>understandable</b>, i.e. we are able to <b>write one sentence about it</b>, e.g. "South Korea has the highest autogas consumption in 2004." . We <b>select</b> option <b>"The chart has no issue from above (i.e. it is in English, readable, and understandable)"</b>.</p>
                        <hr>
                    </div>
                </div>
            </div>
            <div class="text-left">
                <div id="instructions-2" class="instructions d-none">
                    <h5><b>General rules</b></h5>
                    <p id="instructions-rules-text"></p>
                    <h5><b>Chart filtering rules</b></h5>
                    <p id="instructions-rules-claim-generation-text"></p>
                </div>
                <div id="instructions-3" class="instructions d-none">
                    <div id="lan_test" class="text-left">
                        <h5><b>Task Qualification Test: </b></h5>
                        <p>Below you find a chart and a few related questions. You need to answer them successfully to start with the task. If you fail, you get a second chance. The task will terminate if you fail a second time. </p>
<!--                        <div class="row d-flex justify-content-center">-->
<!--                            <img src="./images_html_files/not_english_chart.PNG" alt="..." class="img-thumbnail">-->
<!--                            <br />-->
<!--                        </div>-->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <br />
    <div id="task-panel" class="row d-none">
        <div class="col-sm-12 mx-auto border rounded shadow-sm" style="background-color: #f5f5f5;">
            <h4 class="text-left mt-3">
                Reference <strong><span id="current-page"></span></strong> of
                <strong><span id="n-pages"></span></strong>:
            </h4>
            <br />
            <!---->
            <div id="instructions-main" class="instructions">
                <h5><b>Chart filtering rules</b></h5>
                <p id="main-page-rules-claim-generation-text"></p>
            </div>
            <hr>
            <div class="row d-flex justify-content-center">
                <div class="col-sm-11 pr-0 pl-0">
                    <h5>1. Look at the following chart and (if available) its caption:
                    </h5>
                </div>
            </div>
            <div class="row d-flex justify-content-center">
                <!--                    <p><span id='chart_reference'></span></p>-->
                <img src='test' id='chart_reference' alt="..." class="img-thumbnail">
            </div>
            <div class="row d-flex justify-content-center">
                <p><b>Caption: </b><span id='caption'></span></p>
            </div>
            <br />
            <div id="table-panel" class=''>
                <div id="author-panel" class=''>
                    <div class="row d-flex justify-content-center">
                        <div class="col-sm-11 pr-0 pl-0">
                            <h5>2. Afterwards decide, if the chart has any of the issues below:</h5>
                            <div class="row d-flex justify-content-center">
                                <div class="col-sm-11 pr-0 pl-0">
                                    <div class="form-check form-check-inline">
                                        <label id="label_0" class="btn form-check-label" for="input_label_0">
                                        <input class="form-check-input" type="radio" id="input_label_0" name="label_radio">
                                            The chart is <b>not in English</b>.
                                        </label>
                                    </div>
                                    <br>
                                    <div class="form-check form-check-inline">
                                        <label id="label_1" class="btn form-check-label" for="input_label_1">
                                        <input class="form-check-input" type="radio" id="input_label_1" name="label_radio">
                                            The chart is <b>not readable</b>.
                                        </label>
                                    </div>
                                    <br>
                                    <div class="form-check form-check-inline">
                                        <label id="placeholder" class="btn form-check-label" for="input_placeholder">
                                            <input class="form-check-input" type="radio" id="input_placeholder" name="label_radio" disabled>
                                            The chart is <b>not understandable</b> because (select one of the reasons below):
                                        </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <label id="label_2" class="btn form-check-label" for="input_label_2">
                                            <input class="form-check-input" type="radio" id="input_label_2" name="label_radio">
                                            Missing information (like title, numbers, or names)
                                        </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <label id="label_3" class="btn form-check-label" for="input_label_3">
                                            <input class="form-check-input" type="radio" id="input_label_3" name="label_radio">
                                            Confusing use of colors
                                        </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <label id="label_4" class="btn form-check-label" for="input_label_4">
                                            <input class="form-check-input" type="radio" id="input_label_4" name="label_radio">
                                            Other reasons:
                                        </label>
                                        <br>
<!--                                        <p>If you selected "Other reasons", give the reason below:</p>-->
                                        <div class="form-group">
                                            <textarea class="form-control" id="reason_other" rows="1" placeholder="Enter reason here..." style="min-width: 100%"></textarea>
                                        </div>
                                    </div>
                                    <div class="form-check form-check-inline" style="margin-top:15px;">
                                        <label id="label_5" class="btn form-check-label" for="input_label_5">
                                        <input class="form-check-input" type="radio" id="input_label_5" name="label_radio">
                                            The chart has <b>no issue from above</b> (i.e. it is in English, readable, and understandable)
                                        </label>
                                    </div>
                                    <br>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <br />
                <br />
                <!---->
                <div class="row p-3">
                    <button type="button" class="btn btn-primary col-sm-2 mr-auto" id="previous-page">
                        Previous
                    </button>
                    <button type="button" class="btn btn-success col-sm-2 ml-auto" id="presubmit" data-toggle="modal"
                            data-target="#submitModal">
                        Submit
                    </button>
                    <button type="button" class="btn btn-primary col-sm-2 ml-auto" id="next-page">
                        Next
                    </button>
                </div>
            </div>
        </div>
        </div>
    </div>
    <div class="modal" id="submitModal">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title mx-auto">Submit your work?</h4>
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                    Please make sure every question has been properly answered before
                    submitting your work. Incomplete work will not be rewarded!
                </div>
                <!-- Modal footer -->
                <div class="modal-footer">
                    <input type="button" class="btn btn-danger ml-auto" data-dismiss="modal" value="Cancel" />
                    <input type="button" class="btn btn-success mr-auto" data-dismiss="modal" value="Submit"
                           id="submit" />
                </div>
            </div>
        </div>
    </div>
    <div class="modal" id="lanErrorModal">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title mx-auto">Warning</h4>
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                    <span id="lan-warning-text">You didn't pass the language test. Please review your
                        answers and try again!</span>
                </div>
                <!-- Modal footer -->
                <div class="modal-footer">
                    <input type="button" class="btn btn-warning mx-auto" data-dismiss="modal" value="OK"
                           id="lan_close_error" />
                </div>
            </div>
        </div>
    </div>
    <div class="modal" id="errorModal">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title mx-auto">Warning</h4>
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                    <span id="warning-text">Your answer didn't pass our quality check. Please review your
                        answers and try again!</span>
                    <span id="warning-hints"></span>
                </div>
                <!-- Modal footer -->
                <div class="modal-footer">
                    <input type="button" class="btn btn-warning mx-auto" data-dismiss="modal" value="OK"
                           id="close_error" />
                </div>
            </div>
        </div>
    </div>
    <div class="modal" id="successModal">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title mx-auto">Success!</h4>
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                    <span id="success-text">Your answer passed our quality check! Press finish to submit
                        them. We appreciate any feedback you may have on the task.</span>
                </div>
                <textarea class="form-control" rows="5" id="feedback_text"
                          placeholder="Type your feeback here ..."></textarea>
                <!-- Modal footer -->
                <div class="modal-footer">
                    <input type="button" class="btn btn-success mx-auto" data-dismiss="modal" value="Finish"
                           id="close_success" />
                </div>
            </div>
        </div>
    </div>
    <form name="mturk_form" method="post" id="mturk_form" action="https://www.mturk.com/mturk/externalSubmit">
        <input type="hidden" value="" name="assignmentId" id="assignmentId" />
        <input type="submit" id="submitButton" style="visibility: hidden;" />
        <input type="hidden" name="outputs" value="" id="outputs" />
        <input type="hidden" name="unsortedElems" value="" id="unsortedElems" />
        <input type="hidden" name="times" value="" id="times" />
        <input type="hidden" name="events" value="" id="events" />
        <input type="hidden" name="feedback" value="" id="feedback" />
    </form>

    <script language="Javascript">
        let sub_publisher_options = {
            0:[
                "Academic and research institutions (e.g. universities and research centres, but not museums and libraries, as those are cultural organisations)",
                "Academic publishers (e.g. journal and article publishers)",
                "Other academic organisations"
            ],
            1: [
                "Vendors and e-commerce companies",
                "Political or religious organisations",
                "Cultural institutions and organisations",
                "Other types of company"
            ],
            2: [],
            3: [
                "Traditional news and media (e.g. news agencies, broadcasters)",
                "Non-traditional news and media (e.g. online magazines, platforms to collaboratively create news)"
            ],
            4: [],
            5: []
        }
        // ['g_id'] sets gold labels
        // let references = [{'claim_db_id': '6072bd2d000ca92c09d146fb', 'chart': './images_html_files/no_issues_chart_2.png', 'caption': 'This is a test caption!', 'label': 'false', 'g_id': {'label': [0]}}, {'claim_db_id': '6072bd2d000ca92c09d1473b', 'chart': './images_html_files/no_issues_chart_2.png', 'label': 'false', 'caption': '', 'table': {'url': 'https://www.law.cornell.edu/uscode/text/28/133', 'caption': '', 'header_horizontal': [], 'header_vertical': [], 'rows_list': [['Delaware', '1'], ['Florida, Northern and Southern', '1'], ['Georgia, Northern', '1'], ['Kansas', '1'], ['Missouri, Eastern and Western', '1'], ['Ohio, Northern', '1'], ['Oklahoma, Western', '1'], ['Pennsylvania, Eastern, Middle and Western', '1'], ['West Virginia, Northern and Southern', '1']], 'html_table': `<table><colgroup><col/><col/></colgroup><thead><tr><th><p><em>Districts</em></p></th><th><p><em>Judges</em></p></th></tr></thead><tbody><tr><td><p><span>Delaware</span></p></td><td><p>1</p></td></tr><tr><td><p><span>Florida, Northern and Southern</span></p></td><td><p>1</p></td></tr><tr><td><p><span>Georgia, Northern</span></p></td><td><p>1</p></td></tr><tr><td><p><span>Kansas</span></p></td><td><p>1</p></td></tr><tr><td><p><span>Missouri, Eastern and Western</span></p></td><td><p>1</p></td></tr><tr><td><p><span>Ohio, Northern</span></p></td><td><p>1</p></td></tr><tr><td><p><span>Oklahoma, Western</span></p></td><td><p>1</p></td></tr><tr><td><p><span>Pennsylvania, Eastern, Middle and Western</span></p></td><td><p>1</p></td></tr><tr><td><p><span>West Virginia, Northern and Southern</span></p></td><td><p>1</p></td></tr></tbody></table>`}, 'g_id': 0}, {'claim_db_id': '6072bd2d000ca92c09d1453d', 'chart': './images_html_files/no_issues_chart_3.png', 'label': 'false', 'table': {'url': 'https://www.nps.gov/parkhistory/online_books/blm/history/', 'caption': '', 'header_horizontal': [], 'header_vertical': [], 'rows_list': [['OPPORTUNITY AND CHALLENGE The Story of BLM', 'OPPORTUNITY AND CHALLENGE The Story of BLM'], ['OPPORTUNITY AND CHALLENGE The Story of BLM'], ['OPPORTUNITY AND CHALLENGE The Story of BLM By James Muhn Hanson R. Stuart designed by Peter D. Doran September 1988 second printing U.S. Department of the Interior Bureau of Land Management TABLE OF CONTENTS', 'OPPORTUNITY AND CHALLENGE', 'The Story of BLM'], ['OPPORTUNITY AND CHALLENGE'], ['The Story of BLM'], ['index.htm Last Updated: 08-Sep-2008']], 'html_table': `<table><tr><td><table><tr><td><font>OPPORTUNITY AND CHALLENGE</font><br/><font>The Story of BLM</font><hr/></td><td><img/></td></tr></table></td></tr><tr><td><img/></td><td><br/><table><tr><td><font><b>OPPORTUNITY AND CHALLENGE</b></font></td></tr><tr><td><font><b>The Story of BLM</b></font></td></tr></table><p><br/><font><b>By</b></font><br/><font><b>James Muhn<br/>Hanson R. Stuart</b></font></p><p><br/><font><b>designed by</b></font><br/><font><b>Peter D. Doran</b></font></p><p><br/><font><b>September 1988</b></font><br/><font>second printing</font></p><p><font>U.S. Department of the Interior<br/>Bureau of Land Management</font></p><p><br/><a><b>TABLE OF CONTENTS</b></a></p></td></tr><tr><td><div><br/><hr/><font>index.htm<br/>Last Updated: 08-Sep-2008</font></div></td></tr></table>`}, 'g_id': 0}, {'claim_db_id': '6072bd2d000ca92c09d145bc', 'chart': './images_html_files/no_issues_chart_1.jpg', 'label': 'true', 'table': {'url': 'https://www.tax-brackets.org/connecticuttaxtable', 'caption': '', 'header_horizontal': ['Tax Bracket', 'Tax Rate'], 'header_vertical': [], 'rows_list': [['$0.00+', '3%'], ['$10,000.00+', '5%'], ['$50,000.00+', '5.5%'], ['$100,000.00+', '6%'], ['$200,000.00+', '6.5%'], ['$250,000.00+', '6.9%'], ['$500,000.00+', '6.99%']], 'html_table': '<table><thead><tr><th> Tax Bracket </th><th> Tax Rate </th></tr></thead><tbody><tr><td> $0.00+ </td><td> 3% </td></tr><tr><td> $10,000.00+ </td><td> 5% </td></tr><tr><td> $50,000.00+ </td><td> 5.5% </td></tr><tr><td> $100,000.00+ </td><td> 6% </td></tr><tr><td> $200,000.00+ </td><td> 6.5% </td></tr><tr><td> $250,000.00+ </td><td> 6.9% </td></tr><tr><td> $500,000.00+ </td><td> 6.99% </td></tr></tbody></table>'}, 'g_id': 0}, {'claim_db_id': '6072bd2d000ca92c09d14861', 'chart': './images_html_files/no_issues_chart_1.jpg', 'label': 'true', 'table': {'url': 'https://www.cdc.gov/csels/dsepd/ss1978/lesson3/section3.html', 'caption': 'This is NOT a test caption', 'header_horizontal': ['Measure', 'Numerator', 'Denominator', '10n'], 'header_vertical': ['Crude death rate', 'Cause-specific death rate', 'Proportionate mortality', 'Death-to-case ratio', 'Neonatal mortality rate', 'Postneonatal mortality rate', 'Infant mortality rate', 'Maternal mortality rate'], 'rows_list': [['Total number of deaths during a given time interval', 'Mid-interval population', '1,000 or 100,000'], ['Number of deaths assigned to a specific cause during a given time interval', 'Mid-interval population', '100,000'], ['Number of deaths assigned to a specific cause during a given time interval', 'Total number of deaths from all causes during the same time interval', '100 or 1,000'], ['Number of deaths assigned to a specific cause during a given time interval', 'Number of new cases of same disease reported during the same time interval', '100'], ['Number of deaths among children < 28 days of age during a given time interval', 'Number of live births during the same time interval', '1,000'], ['Number of deaths among children 28364 days of age during a given time interval', 'Number of live births during the same time interval', '1,000'], ['Number of deaths among children < 1 year of age during a given time interval', 'Number of live births during the same time interval', '1,000'], ['Number of deaths assigned to pregnancy-related causes during a given time interval', 'Number of live births during the same time interval', '100,000']], 'html_table': '<table><thead><tr><th>Measure</th><th>Numerator</th><th>Denominator</th><th>10<sup>n</sup></th></tr></thead><tbody><tr><th>Crude death rate</th><td>Total number of deaths during a given time interval</td><td>Mid-interval population</td><td>1,000 or<br/>100,000</td></tr><tr><th>Cause-specific death rate</th><td>Number of deaths assigned to a specific cause during a given time interval</td><td>Mid-interval population</td><td>100,000</td></tr><tr><th>Proportionate mortality</th><td>Number of deaths assigned to a specific cause during a given time interval</td><td>Total number of deaths from all causes during the same time interval</td><td>100 or 1,000</td></tr><tr><th>Death-to-case ratio</th><td>Number of deaths assigned to a specific cause during a given time interval</td><td>Number of new cases of same disease reported during the same time interval</td><td>100</td></tr><tr><th>Neonatal mortality rate</th><td>Number of deaths among children<br/>&lt; 28 days of age during a given time interval</td><td>Number of live births during the same time interval</td><td>1,000</td></tr><tr><th>Postneonatal mortality rate</th><td>Number of deaths among children 28–364 days of age during a given time interval</td><td>Number of live births during the same time interval</td><td>1,000</td></tr><tr><th>Infant mortality rate</th><td>Number of deaths among children<br/>&lt; 1 year of age during a given time interval</td><td>Number of live births during the same time interval</td><td>1,000</td></tr><tr><th>Maternal mortality rate</th><td>Number of deaths assigned to pregnancy-related causes during a given time interval</td><td>Number of live births during the same time interval</td><td>100,000</td></tr></tbody></table>'}, 'g_id': 0, 'caption': ''}]
        // let lan_test_language = "Swedish";
        // let qualification_questions = [{"question": " The data of which years is shown in the chart?", "options": ["2017 and 2019", "2017 and 2018", "2016-20119"], "answer": 1}, {"question": " What does the x-axis show?", "options": ["different months", "different years", "numbers between 0-180"], "answer": 0}, {"question": " What color represents data of 2018?", "options": ["black", "red", "yellow"], "answer": 1}];

        let qualification_questions = ${qualification_questions}$;
        let references = ${references}$;
        $("#instructions-project-text").html(${instructions_project_text}$);
        $("#instructions-rules-text").html(${instructions_rules_text}$);

        let total = references.length;

        var outputs = [];
        // DEFAULT OUTPUTS IN JSON FORMAT, EX:  { similarity: -1, confidence: -1, reason: "" }
        for (i = 0; i < total; i++) {
            outputs[i] = {label: -1, reason_other: -1, header: -1, publisher: -1, sub_publisher: -1};
        }

        var events = [];

        function log_event(event_type, event_attr) {
            event_obj = {
                timestamp: new Date(),
                type: event_type
            };
            if (event_attr != null) {
                event_obj.attr = event_attr;
            }
            events.push(event_obj);
        }

        log_event("page_displayed", null);

        var times = Array(total).fill(0.0);
        var links_clicked = Array(total).fill(false);
        var lastChange = null;

        failCount = 0;
        lanFailCount = 0;

        $("#instructions-project-text").html(`<br> Welcome to the Chart-Filtering-Task. <br><br> We will show you <b>seven charts</b>. For each chart, you will be asked to do the following: <b>Decide if the chart should be filtered out because its (1) not in English, (2) not readable, OR (3) not understandable (you cannot say what the chart is about) </b>.
        Please avoid using any additional sources or own knowledge.  <br><br> We will show you some examples of how to solve this task on the next page. <br><br> Afterwards, we will ask you <b>three questions</b>. You can progress to the task by answering these questions correctly. The task also includes some <b>checks</b>.
        You can only submit and receive payment by passing them successfully. <br><br> The data collected in this study consist of your inputs, the time you spent on the task and the buttons clicked. This experiment received ethical clearance on 2nd December, 2022 from King's College London (KCL), with registration number MRSP-20/21-22978.
        The data controller for this project will be KCL. If you have any <b>questions or need further assistance</b>, please contact <a href='mailto:sahar.tahmasebi@tib.eu'>sahar.tahmasebi@tib.eu</a>. <br><br> By continuing with the task, you agree to take part in this research project and consent for the data collected to be used for the purpose of this study.`);
        $("#instructions-intro-text").html("In this task, we want your help classifying the nature of some websites. You will be asked to take a look at six websites, and, for each, we'll ask:<br>1) What is the kind of author that normally puts information in that website;<br>2) What is the type of publisher that the website most closely classifies as;<br>3) Depending on the publisher type, a sub-type of publisher will also be asked.");
        $("#instructions-rules-text").html(`<ul><li><b>Read</b> the chart and (if available) its caption carefully.</li><li>You might need to <b>scroll down</b> to see the entire page.</li><li>Do <b>not use</b> any additional <b>sources or your own background knowledge</b> to solve the task. </li><li>You can navigate freely through the tasks using the buttons at the bottom of the page.</li><li>At the end of the task, we <b>automatically check the quality</b> of your work. If you don't pass the test, you can adjust your answers and <b>resubmit</b> two more times. If you fail three times, the <b>task terminates</b> and the work is not accepted.</li><li>We <b>check</b> the quality of the task <b>after submission</b>.</li><li>Make sure you are using either Chrome, Firefox or Edge <b>internet browser</b>. Do not use Internet Explorer.</li><li>You can open these <b>instructions</b> again anytime during the task.</li><li>You must <b>fill all the information</b> requested.</li></ul>`);
        $("#instructions-rules-claim-generation-text").html(`<ul><li>The aim of this task is to <b>filter charts with certain issues</b>.</li><li>We ask you to filter the chart if it is (1.) not in in <b>English</b>, (2.) not <b>readable</b>, or (3.) not <b>understandable</b> (i.e. you are not able to describe the chart in one sentence).</li><li>Before deciding, you should read <b>both the chart and its caption</b>.</li><li><b>Not in English:</b> parts of the chart (e.g. title, axes. caption) are not in English.</li><li><b>Not readable:</b> you can not see parts of the chart properly, for example the text is blurred or the image is cropped.</li><li><b>Not understandable:</b> the chart misses crucial information, for example what the axes mean, AND you cannot understand what the chart is about.</li></ul><p> Next, we will ask you a few questions. You need to answer them correctly to start the task. You have two attempts to answer them correctly, otherwise the task terminates.</p>`);
        $("#main-page-rules-claim-generation-text").html(`<ul><li>The aim of this task is to <b>filter charts with certain issues</b>.</li><li>We ask you to filter the chart if it is (1.) not in in <b>English</b>, (2.) not <b>readable</b>, or (3.) not <b>understandable</b> (i.e. you are not able to describe the chart in one sentence).</li><li>Before deciding, you should read <b>both the chart and its caption</b>.</li><li><b>Not in English:</b> parts of the chart (e.g. title, axes. caption) are not in English.</li><li><b>Not readable:</b> you can not see parts of the chart properly, for example the text is blurred or the image is cropped.</li><li><b>Not understandable:</b> the chart misses crucial information, for example what the axes mean, AND you cannot understand what the chart is about.</li></ul><p>Click <b>Show Instructions</b> above to see some <b>examples</b>.`);

        // $("#lan_test_language").text(lan_test_language)

        for (i = 0; i < qualification_questions.length; i++) {
            $('#lan_test').append(`<div class="row d-flex justify-content-center"><img src=${qualification_questions[i]['image']} alt="..." class="img-thumbnail"></div>`)
            $('#lan_test').append(`<p class="mb-0">${qualification_questions[i]['question']}</p>`)
            $('#lan_test').append(`<div id="lan_quest_${i}" class="btn-group btn-group-toggle mb-3" data-toggle="buttons">`)
            for (j = 0; j < qualification_questions[i]['options'].length; j++)
                $(`#lan_quest_${i}`).append(`<label class="btn btn-primary"><input type="radio" autocomplete="off" value=${j} name='lang_quest_${i}'>${qualification_questions[i]['options'][j]}<br/></label>`)
        }

        $("#n-pages").text(total);

        function showContent(currentPage) {
            if (lastChange) {
                times[parseInt($("#current-page").text()) - 1] +=
                    Date.now() - lastChange;
            }
            $("#current-page").text(currentPage);
            if (currentPage == 1) {
                $("#previous-page").hide();
                $("#next-page").show();
                $("#presubmit").hide();
            } else if (currentPage == total) {
                $("#previous-page").show();
                $("#next-page").hide();
                $("#presubmit").show();
            } else {
                $("#previous-page").show();
                $("#next-page").show();
                $("#presubmit").hide();
            }
            pageIndex = currentPage - 1;
            output = outputs[pageIndex];
            if (output['reason_other'] != -1 && output['reason_other'] != '' && output['reason_other'] != 'Enter reason here...') {
                $(`#reason_other`).val(output['reason_other']);
            }
            else {
                $(`#reason_other`).val("");
            }
            for (i = 0; i < 6; i++) {
                if (output['label'] == i) {
                    $(`#label_${i}`).addClass("active");
                    $(`#label_${i}`).children('input').prop('checked', true)
                } else {
                    $(`#label_${i}`).removeClass("active");
                    $(`#label_${i}`).children('input').prop('checked', false)
                }
            }

            for (i = 0; i < 6; i++) {
                if (output['publisher'] == i) {
                    $(`#publisher_${i}`).addClass("active");
                    $(`#publisher_${i}`).children('input').prop('checked', true)
                } else {
                    $(`#publisher_${i}`).removeClass("active");
                    $(`#publisher_${i}`).children('input').prop('checked', false)
                }
            }

            $('#sub-publisher-options').empty()
            if (output['publisher'] == -1){
                $('#sub-publisher-panel').addClass('d-none')
            } else if (sub_publisher_options[output['publisher']].length == 0) {
                $('#sub-publisher-panel').addClass('d-none')
            } else {
                $('#sub-publisher-panel').removeClass('d-none')
                for (i = 0; i < sub_publisher_options[output['publisher']].length; i++) {
                    $("#sub-publisher-options").append(
                        `<label id="sub_publisher_${i}" class="btn btn-primary subpublisher">
                            <input type="radio" autocomplete="off" value='unavailable' name='sub_publisher_radios'>
                            ${sub_publisher_options[output['publisher']][i]}
                        </label>`
                    );
                    $('label.btn.subpublisher').click(function () {
                        page = parseInt($("#current-page").text());
                        pageIndex = page - 1;
                        outputs[pageIndex]['sub_publisher'] = parseInt(this.id.split('sub_publisher_')[1]);
                    });
                    if (output['sub_publisher'] == i) {
                        $(`#sub_publisher_${i}`).addClass("active");
                        $(`#sub_publisher_${i}`).children('input').prop('checked', true)
                    } else {
                        $(`#sub_publisher_${i}`).removeClass("active");
                        $(`#sub_publisher_${i}`).children('input').prop('checked', false)
                    }
                }
            }

            $("#chart_reference").attr("src", references[pageIndex]["chart_img"]);
            $("#caption").text(references[pageIndex]["caption"]);


            // set added checkbox to checked if it has been clicked before
            if (output['header'] != -1) {
            // headers for this page have been check-boxed before
                for (j = 0; j < output['header'].length; j++) {
                    var elem_j = output['header'][j]
                    // set checkbox to checked when found in output['header] list
                    $(`#input_header_${elem_j}`).prop('checked', true)
                }
            }


            lastChange = Date.now();
        }

        function validateRegex(str) {
            var reU = /^(null|(?!0*[.]0*$|[.]0*$|0*$)\d+[.]?\d{0,}$)/;
            return reU.test(str);
        }

        function verifyLanguageAnswers() {
            allOK = 4;
            for (i = 0; i < qualification_questions.length; i++) {
                let chosen = parseInt($(`input[name="lang_quest_${i}"]:checked`).val());
                if (chosen != qualification_questions[i]['answer']) {
                    allOK = allOK - 1
                }
            }
            return (allOK == 4)
        }

        function verifyAnswers() {
            times[times.length - 1] += Date.now() - lastChange;
            lastChange = Date.now();

            var allControlsUsedCheck = true;
            const outputs_flat = [].concat(...outputs)
            for (i = 0; i < outputs_flat.length; i++){
                if (
                    // check if all labels are set and "reason_other" given if "Other reason" selected
                    (outputs_flat[i]["label"] == -1) ||
                    ((outputs_flat[i]["label"] == 4) &&
                    ((outputs_flat[i]["reason_other"] == -1) || (outputs_flat[i]["reason_other"].trim() == '')))
                ) {
                    allControlsUsedCheck = false;
                }
            }
            if (!allControlsUsedCheck) {
                log_event("verification_check_failed", {
                    check_failed: "outputs_moved_check",
                    outputs: JSON.parse(JSON.stringify(outputs))
                });
            }

            var allTimesCheck = true;
            for (t of times) {
                if (t < 2500) {
                    allTimesCheck = false;
                }
            }
            if (!allTimesCheck) {
                log_event("verification_check_failed", {
                    check_failed: "minimum_time_check",
                    times: JSON.parse(JSON.stringify(times))
                });
            }

            // check gold labels - var references saves gold labels
            var allGoldenCheck = true;
            for (i = 0; i < total; i++) {
                if (references[i]['g_id'] != 0) {
                    if (references[i]['g_id']['label'] != -1){
                        // check if gold label (g_id) same as input by annotator
                        if (references[i]['g_id']['label'].indexOf(outputs[i]['label']) == -1){
                            allGoldenCheck = false
                        }
                    }
                }
            }
            if (!allGoldenCheck) {
                log_event("verification_check_failed", {
                    check_failed: "golden_standard_check",
                    outputs: JSON.parse(JSON.stringify(outputs))
                });
            }

            //allGoldenCheck = true;

            return {'controls':allControlsUsedCheck, 'times':allTimesCheck, 'golden':allGoldenCheck};
        }

        $(function () {
            $("#previous-page").click(function () {
                var page = parseInt($("#current-page").text());
                if ($("reason_other").val() != "" && $("reason_other").val() != -1) {
                    outputs[page-1]['reason_other'] = $("#reason_other").val()
                }
                newPage = page - 1;
                showContent(newPage);
                log_event("moved_backward", {
                    new_page_index: newPage,
                    outputs: JSON.parse(JSON.stringify(outputs))
                });
            });
            $("#next-page").click(function () {
                var page = parseInt($("#current-page").text());
                if ($("reason_other").val() != "" && $("reason_other").val() != -1) {
                    outputs[page-1]['reason_other'] = $("#reason_other").val()
                }
                newPage = page + 1;
                showContent(newPage);
                log_event("moved_forward", {
                    new_page_index: newPage,
                    outputs: JSON.parse(JSON.stringify(outputs))
                });
            });
            $("#ready-button").click(function () {
                if (verifyLanguageAnswers()) {
                    $("#instructions-0").addClass("d-none");
                    $("#instructions-1").removeClass("d-none");
                    $("#instructions-2").removeClass("d-none");
                    $("#instructions-3").removeClass("d-none");
                    $("#instructions-btns").addClass("d-none");
                    $(this).addClass("d-none");
                    $("#instructions-toggle").removeClass("d-none");
                    $("#instructions-panel").addClass("collapse");
                    $("#task-panel").removeClass("d-none");
                    showContent(1);
                    log_event("task_started", null);
                } else {
                    lanFailCount = lanFailCount + 1;
                    if (lanFailCount >= 3) {
                        $("#lan-warning-text").html(
                            "You didn't pass the language test.<br><br><strong>Unfortunately, you've reached the maximum amount of trials.<br><br>This window will be erased. Thank you very much for your work and please press return above so other worker may take this task.</strong>"
                        );
                        $("#lanErrorModal").modal("toggle");
                        $("#lanErrorModal").on("hidden.bs.modal", function () {
                            $("*").empty();
                        });
                    } else {
                        $("#lanErrorModal").modal("toggle");
                    }
                }
            });
            $("#instructions-toggle").click(function () {
                is_shown = $("#instructions-panel").hasClass("show");
                if (is_shown) {
                    $("#instructions-toggle-text").text("Show Instructions");
                    log_event("closed_instructions", null);
                } else {
                    $("#instructions-toggle-text").text("Hide Instructions");
                    log_event("opened_instructions", null);
                }
            });

            $('#header_div').on('click', '.btn', function () {
                if (this.id.startsWith('input_header')) {
                    let header_i = parseInt(this.id.split('input_header_')[1]);
                    if (outputs[pageIndex]['header'] == -1) {
                        // add element
                        var headerArray = [];
                        headerArray.push(header_i);
                        outputs[pageIndex]['header'] = headerArray;
                    } else {
                        let headerArray = outputs[pageIndex]['header'];
                        if (headerArray.indexOf(header_i) == -1) { // if check is set
                            // add to list, element not there
                            headerArray.push(header_i);
                        } else {
                            // remove => find out why Array(0) when splice used
                            headerArray.splice(headerArray.indexOf(header_i), 1)
                        }
                        outputs[pageIndex]['header'] = headerArray;
                    }
                }
            });

            $('label.btn').click(function () {
                page = parseInt($("#current-page").text());
                pageIndex = page - 1;
                if (this.id.startsWith('label')) {
                    outputs[pageIndex]['label'] = parseInt(this.id.split('label_')[1]);
                } else if (this.id.startsWith('publisher')) {
                    outputs[pageIndex]['publisher'] = parseInt(this.id.split('publisher_')[1]);
                    $('#sub-publisher-options').empty();
                    if (sub_publisher_options[outputs[pageIndex]['publisher']].length == 0){
                        $('#sub-publisher-panel').addClass('d-none');
                    } else {
                        $('#sub-publisher-panel').removeClass('d-none');
                        for (i = 0; i < sub_publisher_options[outputs[pageIndex]['publisher']].length; i++) {
                            $("#sub-publisher-options").append(
                                `<label id="sub_publisher_${i}" class="btn btn-primary subpublisher">
                                    <input type="radio" autocomplete="off" value='unavailable' name='sub_publisher_radios'>
                                    ${sub_publisher_options[outputs[pageIndex]['publisher']][i]}
                                </label>`
                            )
                        };
                        $('label.btn.subpublisher').click(function () {
                            page = parseInt($("#current-page").text());
                            pageIndex = page - 1;
                            outputs[pageIndex]['sub_publisher'] = parseInt(this.id.split('sub_publisher_')[1]);
                        })
                    }
                }
            });

            $('#intro-next').click(function () {
                let current_instructions_active = $('div.instructions.active')[0];
                let current_instructions_id = parseInt(current_instructions_active.id.split('instructions-')[1]);
                $(`#instructions-${current_instructions_id}`).addClass('d-none').removeClass('active');
                $(`#instructions-${current_instructions_id + 1}`).removeClass('d-none').addClass('active');
                if (current_instructions_id == 0) {
                    $('#intro-previous').removeClass('d-none');
                } else if (current_instructions_id == 2) {
                    $('#intro-next').addClass('d-none');
                    $('#ready-button').removeClass('d-none');
                }
            });
            $('#intro-previous').click(function () {
                let current_instructions_active = $('div.instructions.active')[0];
                let current_instructions_id = parseInt(current_instructions_active.id.split('instructions-')[1]);
                $(`#instructions-${current_instructions_id}`).addClass('d-none').removeClass('active');
                $(`#instructions-${current_instructions_id - 1}`).removeClass('d-none').addClass('active');
                if (current_instructions_id == 2) {
                    $('#ready-button').addClass('d-none');
                    $('#intro-next').removeClass('d-none');
                } else if (current_instructions_id == 1) {
                    $('#intro-previous').addClass('d-none');
                }
            });
            $("#submit").click(function () {
                let verification = verifyAnswers();
                if (verification['controls'] && verification['times'] && verification['golden']){
                    $("#successModal").modal("toggle");
                    $("#successModal").on("hidden.bs.modal", function () {
                        log_event("task_finished", null);
                        $("#feedback").val($("#feedback_text").val());
                        $("#outputs").val(JSON.stringify(outputs));
                        $("#times").val(JSON.stringify(times));
                        $("#events").val(JSON.stringify(events));
                        $("#submitButton").trigger("click");
                    });
                } else {
                    failCount = failCount + 1;
                    $("#warning-hints").empty();
                    let warningString = "<ul>"
                    if (!verification['controls']){
                        warningString += "<li>You did not provide all required answers. Please provide answers to every question required. Maybe you skipped the last one. If you provided answers to a non-required question, that is ok. If any slider is in the position you want, but grey, click on it to turn it blue.</li>"
                    }
                    if (!verification['times']){
                        warningString += "<li>You seem to have filled some questions too quickly and we suspected bot activity. Spend a couple of seconds more in each item, maybe review your answers.</li>"
                    }
                    if (!verification['golden']){
                        warningString += "<li>We know the answers for a small portion of the questions, and you seem to disagree with us. Please review your answers, but if you feel you are right even so, please contact the Requester.</li>"
                    }
                    warningString += "</ul>"
                    $("#warning-hints").html(warningString);
                    if (failCount >= 3) {
                        $("#warning-text").html(
                            "Your answer didn't pass our quality check.<br><br><strong>Unfortunately, you've reached the maximum amount of trials.<br><br>This window will be erased. Thank you very much for your work and please press return above so other worker may take this task.</strong>"
                        );
                        $("#errorModal").modal("toggle");
                        $("#errorModal").on("hidden.bs.modal", function () {
                            $("*").empty();
                        });
                    } else {
                        $("#errorModal").modal("toggle");
                    }
                }
            });
        });
        turkSetAssignmentID(); 
    </script>
</body>

</html>